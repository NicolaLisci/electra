{{ define "main" }}

<!-- banner -->
{{ $volantini := where .Site.RegularPages "Type" "volantini" }}
{{ $sorted := sort $volantini ".Date" "desc" }}

{{ if gt (len $sorted) 0 }}
<section id="carosello-volantini" style="max-width: 800px; margin: 2rem auto; position: relative; overflow: hidden; border-radius: 10px; border: 1px solid #ccc;">
  <div style="white-space: nowrap; transition: transform 0.5s ease;" id="slides-container">
    {{ range $sorted }}
      <div style="display: inline-block; width: 100%; text-align: center;">
        <a href="{{ .Params.file }}" target="_blank" style="text-decoration: none; color: inherit;">
          <img src="{{ .Params.image }}" alt="{{ .Title }}" style="width: 100%; height: auto; border-bottom: 1px solid #ddd;">
          <h3 style="margin: 0.5rem 0;">{{ .Title }}</h3>
          <p style="margin: 0; color: #666;">Pubblicato il {{ .Date.Format "02/01/2006" }}</p>
        </a>
      </div>
    {{ end }}
  </div>

  <!-- Bottoni navigazione -->
  <button id="prev-slide" aria-label="Slide precedente" style="position: absolute; top: 50%; left: 10px; transform: translateY(-50%); background: rgba(0,0,0,0.4); border:none; color:white; font-size: 2rem; cursor: pointer; border-radius: 50%; width: 40px; height: 40px;">‹</button>
  <button id="next-slide" aria-label="Slide successivo" style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%); background: rgba(0,0,0,0.4); border:none; color:white; font-size: 2rem; cursor: pointer; border-radius: 50%; width: 40px; height: 40px;">›</button>
</section>

<script>
  (function() {
    const container = document.getElementById('slides-container');
    const slidesCount = container.children.length;
    let currentIndex = 0;

    function updateSlide() {
      container.style.transform = `translateX(-${currentIndex * 100}%)`;
    }

    document.getElementById('prev-slide').addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + slidesCount) % slidesCount;
      updateSlide();
    });

    document.getElementById('next-slide').addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % slidesCount;
      updateSlide();
    });

    // Optional: auto slide ogni 5 secondi
    setInterval(() => {
      currentIndex = (currentIndex + 1) % slidesCount;
      updateSlide();
    }, 5000);
  })();
</script>
{{ else }}
<p style="text-align:center; font-style: italic; color:#777;">Nessun volantino disponibile.</p>
{{ end }}


<!-- /banner -->

<!-- feature -->
{{ with .Params.feature }}
{{ if .enable }}
<section class="section bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 text-center">
        <h2 class="section-title">{{ .title | markdownify }}</h2>
      </div>
      {{ range .feature_item }}
      <div class="col-md-4 col-sm-6 mb-4">
        <div class="feature-card text-center">
          <i class="{{.icon}} mb-3"></i>
          <h4 class="mb-2">{{ .name | title }}</h4>
          <p>{{ .content | markdownify }}</p>
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
{{ end }}
<!-- /feature -->



<!-- service -->
{{ with .Params.service }}
{{ if .enable }}
{{ range $i,$p := .service_item }}
{{if modBool $i 2}}
<section class="section">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6 order-2 order-md-1">
        <h2 class="section-title">{{ .title | markdownify }}</h2>
        <p>{{ .content | markdownify }}</p>
        {{ if .button.enable }}
        {{ with .button }}
        <a href="{{ .link | relURL }}" title="{{ .label }}" class="btn-link">{{ .label }} <i
            class="fas fa-arrow-right"></i></a>
        {{ end }}
        {{ end }}
      </div>
      <div class="col-md-6 order-1 order-md-2 mb-4 mb-md-0">
        <div class="swiper testimonial-slider">
            <div {{if gt (len .images) 1}}class="swiper-wrapper" {{end}}>
              {{ range .images }}
              <div class="swiper-slide">
                {{ partial "image.html" (dict "Src" . "Alt" "Image" ) }}
              </div>
              {{ end }}
            </div>
          <div class="testimonial-slider-pagination mt-9 flex items-center justify-center text-center"></div>
        </div>
      </div>
    </div>
  </div>
</section>
{{ else }}
<section class="section bg-light">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6 mb-4 mb-md-0">
        <div class="swiper testimonial-slider">
          <div {{if gt (len .images) 1}}class="swiper-wrapper" {{end}}>
            {{ range .images }}
            <div class="swiper-slide">
              {{ partial "image.html" (dict "Src" . "Alt" "Image" ) }}
            </div>
            {{ end }}
          </div>
        <div class="testimonial-slider-pagination mt-9 flex items-center justify-center text-center"></div>
      </div>
      </div>
      <div class="col-md-6">
        <h2 class="section-title">{{ .title | markdownify }}</h2>
        <p>{{ .content | markdownify }}</p>
        {{ if .button.enable }}
        {{ with .button }}
        <a href="{{ .link | relURL }}" title="{{ .label }}" class="btn-link">{{ .label }} <i
            class="fas fa-arrow-right"></i></a>
        {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
</section>
{{ end }}
{{ end }}
{{ end }}
{{ end }}
<!-- /service -->






<!-- screenshot -->
{{ with .Params.screenshot }}
{{ if .enable }}
<section class="section pb-0">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto text-center">
        <h2 class="section-title">{{ .title | markdownify }}</h2>
      </div>
    </div>
  </div>
  {{ with .image }} <img src="{{ . | relURL }}" alt="" class="img-fluid w-100">{{ end }}
</section>
{{ end }}
{{ end }}
<!-- /screenshot -->

<!-- call to action -->
{{ with .Params.call_to_action }}
{{ if .enable }}
<section class="section">
  <div class="container section shadow rounded-lg px-4">
    <div class="row align-items-center justify-content-center text-center text-md-left">
      <div class="col-lg-4 col-md-5 mb-4 mb-md-0">
        {{ partial "image" (dict "Src" .image "Alt" "call to action image" "Class" "img-fluid w-100") }}
      </div>
      <div class="col-lg-5 col-md-6">
        <h2 class="section-title">{{ .title | markdownify }}</h2>
        {{with .content }}<p class="mb-4">{{ . | markdownify }}</p>{{ end }}
        {{ if .button.enable }}
        {{ with .button }}
        <a href="{{ .link | relURL }}" title="{{ .label }}" class="btn btn-primary">{{ .label }}</a>
        {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
</section>
{{ end }}
{{ end }}
<!-- /call to action -->

{{ end }}
